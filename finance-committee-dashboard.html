<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Finance Committee - OrgBoard</title>
    <link rel="icon" href="assets/img/logo.jpg" type="image/jpeg">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <style>
      * { 
        margin: 0; 
        padding: 0; 
        box-sizing: border-box; 
      }

      body { 
        background: linear-gradient(180deg, #ecfdf5 0%, #f6f9f8 100%); 
        color: #333; 
        min-height: 100vh; 
        display: flex; 
        flex-direction: column; 
      }

      @media (min-width: 900px) { 
        body { 
          min-width: 900px; 
        } 
      }

      header { 
        background-color: #2b6758; 
        color: white; 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        padding: 0.8rem 1.5rem; 
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); 
        position: sticky; 
        top: 0; 
        z-index: 10; 
      }

      header .logo { 
        display: flex; 
        align-items: center; 
      }

      .orgboard-logo { 
        width: 50px; 
        height: 50px; 
        border-radius: 50%; 
        object-fit: cover; 
        margin-right: 10px; 
        animation: pulseGlow 2s infinite; 
        box-shadow: 0 0 8px #00ffb3; 
      }

      @keyframes pulseGlow {
        0% { 
          box-shadow: 0 0 6px #00ffb3; 
        }

        50% { 
          box-shadow: 0 0 18px #00ffb3; 
        }

        100% { 
          box-shadow: 0 0 6px #00ffb3; 
        }
      }

      header h1 { 
        font-size: 1.35rem; 
        font-weight: 600; 
      }

      header p { 
        font-size: 0.8rem; 
        color: white; 
      }

      header .icons { 
        display: flex; 
        align-items: center; 
        gap: 15px; 
        font-size: 1.4rem; 
      }

      .profile-icon { 
        width: 38px; 
        height: 38px; 
        border-radius: 50%; 
        background-color: white; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        color: #2b6758; 
        font-weight: 700; 
        font-size: 1rem; 
        cursor: pointer; 
      }

      nav { 
        background-color: #265c4f; 
        color: white; 
        display: flex; 
        flex-wrap: wrap; 
        justify-content: center; 
        align-items: center; 
        padding: 0.6rem 1rem; 
      }

      nav a { 
        margin: 5px 12px; 
        text-decoration: none; 
        color: white; 
        font-weight: 500; 
        transition: color 0.3s; 
      }

      nav a:hover { 
        color: #00ffb3; 
      }

      nav span { 
        margin-left: auto; 
        font-weight: 600; 
        font-size: 0.9rem; 
      }

      .welcome-back{
        margin-right: 15px;
      }

      .dashboard-cards { 
        display: grid; 
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
        gap: 1.2rem; 
        padding: 2rem; 
        align-items: start; 
      }

      .card { 
        border-radius: 15px; 
        text-align: center; 
        padding: 1.5rem; 
        font-weight: 600; 
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.12); 
        transition: transform 0.25s ease, box-shadow 0.25s ease; 
        min-width: 0; 
        box-sizing: border-box; 
      }

      .card:hover { 
        transform: translateY(-5px);
      }

      .green-card, .blue-card, .yellow-card, .red-card { 
        background-color: white; 
        color: black;
      }

      .heading {
        color: #265c4f;
      }

      .card p:first-child { 
        font-size: 1.8rem; 
        font-weight: bold; 
      }

      .card p:nth-child(2) { 
        font-size: 0.95rem; 
      }

      .main-grid { 
        display: grid; 
        grid-template-columns: 1fr; 
        gap: 1.2rem; 
        padding: 0 2rem 2rem; 
      }

      @media (min-width: 992px) { 
        .main-grid { 
          grid-template-columns: 1fr 1fr; 
        } 
      }

      .box { 
        background: white; 
        border-radius: 15px; 
        padding: 1.5rem; 
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1); 
        position: relative; 
      }

      .box h2 { 
        font-weight: 600; 
        margin-bottom: 1.5rem; 
        font-size: 1rem; 
        color: #2b6758; 
      }
      
      .dashboard-view-btn {
        position: absolute;
        top: 20px;
        right: 24px;
        background-color: #2b6758;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 10px 18px;
        cursor: pointer;
        font-weight: 600;
        font-size: 14px;
        transition: background 0.3s ease, transform 0.2s;
        box-shadow: 0 2px 5px rgba(0,0,0,0.12);
      }

      .dashboard-view-btn:hover {
        background-color: #00ffb3;
        transform: translateY(-2px);
      }

      .dashboard-view-btn:active {
        transform: translateY(0);
      }

      a.event-item, a.notif-item {
        display: block;
        text-decoration: none;
        color: inherit;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 0.9rem;
        margin-bottom: 0.6rem;
        background-color: #f9fafb;
        transition: background 0.3s, transform 0.2s;
      }
      
      a.event-item:hover, a.notif-item:hover, .event-card:hover {
        background-color: #ecfdf5;
        transform: scale(1.01);
      }

      .event-card h4 { 
        font-weight: 600; 
        margin-bottom: 0.3rem; 
      }

      .event-card p { 
        font-size: 0.9rem; 
        margin-bottom: 0.3rem; 
        color: #333; 
      }

      .event-details {
        font-style: normal;
        font-weight: 600;
        color: #166534;
        background: none;
        padding: 0;
        border: none;
        font-size: 0.85rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .status {
        color: #854d0e;
        font-style: normal;
        font-weight: 600;
        background: none;
        padding: 0;
        border: none;
        font-size: 0.85rem;
      }

      .event-card {
        position: relative;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 1rem;
        margin-bottom: 0.8rem;
        background-color: #f9fafb;
      }

      .event-card .event-status {
        display: flex;
        align-items: center;
        font-weight: 600;
        color: #166534;
        font-size: 0.9rem;
      }

      .event-status-1 {
        display: flex;
        align-items: center;
        font-weight: 600;
        color: #14532d;
        font-size: 0.9rem;
      }

      .event-status-2 {
        display: flex;
        align-items: center;
        font-weight: 600;
        color: #854d0e;
        font-size: 0.9rem;
      }

      .event-status-3 {
        display: flex;
        align-items: center;
        font-weight: 600;
        color: #1e3a8a;
        font-size: 0.9rem;
      }

      .event-card .view-details {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background-color: #2b6758;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 12px 15px;
        font-size: 0.8rem;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.3s ease, transform 0.2s ease;
      }

      .view-details:hover {
        background-color: #00ffb3;
        transform: translateY(-2px);
      }

      .view-details:active {
        transform: translateY(0);
      }

      .event-details button { 
        margin-left: 8px; 
      }

      img { 
        max-width: 100%; 
        height: auto; 
        display: block; 
      }

      .dashboard-cards > *, .main-grid > *, .box, header, nav, .modal, .es-modal-wide, .details-content { 
        min-width: 0; 
        box-sizing: border-box; 
      }

      html, body { 
        max-width: 100%; 
        overflow-x: hidden; 
      }

      table { 
        width: 100%; 
        border-radius: 10px; 
        overflow: hidden; 
        box-shadow: 0 2px 8px rgba(0,0,0,0.05); 
      }

      thead { 
        background-color: #2b6758; 
        color: white; 
      }

      th, td { 
        padding: 0.8rem; 
        text-align: center; 
      }

      tbody tr:hover { 
        background-color: #ecfdf5; 
      }

      .status-pending { 
        color:#854d0e; 
        font-weight: 600; 
      }

      .status-approved { 
        color:#1e3a8a; 
        font-weight: 600; 
      }

      .status-rejected {
        color:#FF0000; 
        font-weight: 600;
      }

      footer { 
        text-align: center; 
        font-size: 0.8rem; 
        color: #666; 
        margin: 1.5rem 0; 
      }

      .modal-overlay {
        display: none;
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.45);
        justify-content: center;
        align-items: center;
        z-index: 50;
        backdrop-filter: blur(6px);
      }

      .modal {
        background: #ffffff;
        border-radius: 20px;
        width: 90%;
        max-width: 900px;
        padding: 0;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        position: relative;
        animation: fadeIn 0.3s ease;
      }

      .modal-header {
        background: #2b6758;
        color: white;
        padding: 1rem 1.5rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .modal-header input {
        border: none;
        background: white;
        padding: 0.6rem 1rem;
        border-radius: 8px;
        width: 70%;
        font-size: 0.9rem;
        outline: none;
      }

      .modal-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
        padding: 1.8rem;
        max-height: 70vh;
        overflow-y: auto;
      }

      .refresh-btn {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: white;
        transition: transform 0.3s, color 0.3s;
      }

      .refresh-btn:hover {
        color: #00ffb3;
        transform: rotate(90deg);
      }

      @keyframes refreshMove {
        0% { 
          transform: translateY(0); 
          opacity: 1; 
        }

        25% { 
          transform: translateY(-10px); 
          opacity: 0.8; 
        }

        50% { 
          transform: translateY(10px); 
          opacity: 0.9; 
        }

        100% { 
          transform: translateY(0); 
          opacity: 1; 
        }
      }

      .event-card.refresh-anim {
        animation: refreshMove 0.6s ease;
      }

      .modal-content::-webkit-scrollbar { 
        width: 6px; 
      }

      .modal-content::-webkit-scrollbar-thumb { 
        background: #ccc; 
        border-radius: 3px; 
      }

      .modal-content h3 {
        color: #2b6758;
        margin-bottom: 1rem;
        font-size: 1.05rem;
        font-weight: 600;
        border-bottom: 2px solid #e5e7eb;
        padding-bottom: 0.4rem;
      }

      .close-modal {
        background: none;
        border: none;
        font-size: 1.8rem;
        cursor: pointer;
        color: white;
        transition: color 0.3s;
      }
      .close-modal:hover { color: #00ffb3; }

      @keyframes fadeIn {
        from { 
          opacity: 0; 
          transform: scale(0.95); 
        }

        to { 
          opacity: 1; 
          transform: scale(1); 
        }
      }

      .success-modal {
        position:fixed;
        top:0;
        left:0;
        width:100%;
        height:100%;
        display:flex;
        justify-content:center;
        align-items:center;
        background:rgba(0,0,0,0.5);
        opacity:0;
        pointer-events:none;
        transition:opacity 0.25s ease;
        z-index:1000;
      }

      .success-modal.active {
        opacity:1;
        pointer-events:auto
      }

      .success-modal .card {
        position:relative;
        max-width:400px;
        padding:60px;
        border-radius:15px;
        text-align:center;
        background:#ffffff;color:#333;
        box-shadow:0 10px 25px rgba(0,0,0,0.25);
        z-index:1100
      }

      .success-icon {
        display:flex;
        justify-content:center;
        align-items:center;
        width:100px;
        height:100px;
        margin:0 auto 20px;
        border-radius:50%;
        background-color:#2b6758;
        color:#fff;
        font-size:64px;
        line-height:1;
        font-weight:700
      }

      .success-modal .success-text {
        font-size:1.05rem;
        color:#333;
        margin-top:6px;
        display:block
      }

      .success-modal .card { 
        background: #fff !important; 
      }

      .success-modal .card p { 
        color: #333 !important; 
        font-weight:400 !important; 
      }

      .success-modal.active .card {
        animation:floatIn 0.28s ease
      }

      @keyframes floatIn {
        0%{
          transform:translateY(-10px);
          opacity:0
        }
        
        100% {
          transform:translateY(0);
          opacity:1
        }
      }

      @media (max-width: 768px) {
        .modal-content { 
          grid-template-columns: 1fr; 
          max-height: 75vh; 
        }

        .modal-header input { 
          width: 85%; 
        }
      }

      .details-float {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(43, 103, 88, 0.25);
        backdrop-filter: blur(6px);
        justify-content: center;
        align-items: center;
        z-index: 120;
        animation: fadeIn 0.25s ease;
      }

      .details-content {
        background: #ffffff;
        border-radius: 15px;
        width: 90%;
        max-width: 480px;
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        animation: scaleUp 0.3s ease;
      }

      .details-header {
        background: #2b6758;
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 1.5rem;
      }

      .details-header h3 {
        font-size: 1.2rem;
        font-weight: 600;
      }

      .details-body {
        padding: 1.5rem 2rem;
      }

      .details-body p {
        font-size: 0.95rem;
        color: #333;
        margin: 0.6rem 0;
      }

      .details-body strong {
        color: #265c4f;
      }

      #financialReportSection {
        font-family: "Poppins", sans-serif;
        background-color: #f8fdfb;
        padding: 2rem;
      }

      .filter-container {
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
        width: 100%;
      margin-bottom: 1.5rem;
      }

      .search-row input {
        width: 100%;
        height: 42px;
        border: 1px solid #d0ddd8;
        border-radius: 10px;
        padding: 0 1rem;
        font-size: 0.95rem;
        background-color: #fff;
        transition: 0.2s;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .search-row input:focus {
        outline: none;
        border-color: #2b6758;
        box-shadow: 0 0 4px rgba(43, 103, 88, 0.4);
      }

      .dropdown-row {
        display: flex;
        align-items: center;
        gap: 1rem;
        width: 100%;
      }

      .dropdown-row select {
        flex: 1;
        height: 42px;
        border: 1px solid #d0ddd8;
        border-radius: 10px; 
        padding: 0 3rem 0 1rem; 
        font-size: 0.95rem;
        font-weight: 500;
        color: black;
        background-color: #ffffff;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        transition: all 0.25s ease;
        appearance: none;
        cursor: pointer;

        background-image: url("data:image/svg+xml,%3Csvg fill='%232b6758' height='18' viewBox='0 0 24 24' width='18' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 1.5rem center; 
        background-size: 18px;
      }

      .dropdown-row select:focus {
        outline: none;
        border-color: #2b6758;
        box-shadow: 0 0 4px rgba(43, 103, 88, 0.4);
      }

      tbody tr td {
        border: 1px solid #ccc;
      }

      @media (max-width: 992px) {
        .dropdown-row {
          flex-direction: column;
          align-items: stretch;
        }
      }

      .orgboard-btn {
        background-color: #2b6758;
        color: #fff;
        border: none;
        border-radius: 6px;
        padding: 16px 18px;
        font-size: 0.85rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.25s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.12);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        height: 34px; 
        min-width: 70px;
      }

      .orgboard-btn:hover {
        background-color:#00ffb3;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      }

      .orgboard-btn:active {
        transform: translateY(0);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.12);
      }

      .search-wrapper {
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100%;
        margin-top: 10px;
      }

      .search-wrapper input {
        flex: 1;
        padding: 10px 12px;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 14px;
        transition: border-color 0.3s, box-shadow 0.3s;
      }

      .search-wrapper input:focus {
        border-color: #2b6758;
        box-shadow: 0 0 5px rgba(43, 103, 88, 0.3);
        outline: none;
      }

      /* Make select dropdowns visually match the search input */
      .filter-row select,
      .dropdown-row select,
      .filter-container select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        display: inline-block;
        box-sizing: border-box;
        padding: 10px 12px;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 14px;
        background-color: #fff;
        color: inherit;
        min-height: 40px;
        line-height: 1.2;
        cursor: pointer;
      }

      .filter-row select:focus,
      .dropdown-row select:focus,
      .filter-container select:focus {
        border-color: #2b6758;
        box-shadow: 0 0 5px rgba(43, 103, 88, 0.3);
        outline: none;
      }

      .search-btn {
        background-color: #2b6758;
        border: none;
        padding: 12px 14px;
        border-radius: 7px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: 0.2s;
      }

      .search-btn:hover {
        background-color:#00ffb3;
        transform: translateY(-2px);
      }

      .search-btn:active {
        transform: translateY(0);
      }

      .search-icon {
        width: 18px;
        height: 18px;
        color: white;
        stroke: white;
      }

      .progress-wrapper {
        margin: 40px 2rem;
        background-color: #ffffff;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        padding: 20px;
        font-family: 'Poppins', sans-serif;
        width: auto;
        max-width: calc(100% - 4rem);
      }

      .finance-table td {
        padding: 14px 18px;
        text-align: center;
        border-bottom: 1px solid #e0e0e0;
      }

      .finance-table th {
        font-weight: 600;
      }

      .financial-view-btn {
        background-color: #2b6758;
        color: #fff;
        border: none;
        border-radius: 6px;
        padding: 10px 18px;
        font-size: 14px;
        cursor: pointer;
        font-weight: 500;
        transition: 0.2s;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.12);
        margin-left: 12px;
      }

      .financial-view-btn:hover {
        background-color: #00ffb3;
        transform: translateY(-2px);

      }

      .financial-view-btn:active {
        transform: translateY(0);
      }

      .progress-container {
        display: flex;
        align-items: center;
        gap: 8px;
        justify-content: center;
      }

      .progress-fill {
        height: 100%;
        background-color: #009c63;
        border-radius: 10px;
        transition: width 0.5s ease;
      }

      .progress-percent {
        font-size: 14px;
        color: #333;
      }

      .center-btn {
        display: flex;
        flex-direction: column; 
        align-items: center;
        gap: 10px; 
      }

      .report-btn {
        background-color: #2b6758; 
        color: #fff;
        border: none;
        border-radius: 6px;
        padding: 18px 10px;
        font-size: 0.85rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.25s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.12);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        height: 34px;
        min-width: 70px;
      }

      .report-btn:hover {
        background-color: #00ffb3;
        transform: translateY(-2px);
      }

      .report-btn:active {
        transform: translateY(0);
      }

      .table-card {
        width: 100%;
        margin: 40px auto;
        background-color: #ffffff;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        padding: 20px;
        font-family: 'Poppins', sans-serif;
        overflow-x: auto; 
      }

      .finance-table {
        min-width: 720px;
        border-collapse: collapse;
      }

      .table-btn {
        background-color: #2b6758; 
        color: #fff;
        border: none;
        border-radius: 6px;
        padding: 16px 18px;
        font-size: 0.85rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.25s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.12);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        height: 34px; 
        min-width: 70px;
      }

      .table-btn:hover {
        background-color: #00ffb3;
        transform: translateY(-2px);
      }

      .table-btn:active {
        transform: translateY(0);
      }

      .profile-dropdown {
        position: absolute;
        top: 50px;
        right: 5px;
        background: #ffffff;
        width: 270px;
        padding: 10px 0;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        display: none;
        flex-direction: column;
        z-index: 1000;
        font-family: 'Poppins', sans-serif;
        animation: fadeIn 0.2s ease;
        min-width: 230px;
      }

      .profile-dropdown.show {
        display: flex;
      }

      .notif-btn {
        background-color: #1f5d50; 
        color: white;
        border: 2px solid #00ffb3;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        position: relative;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 6px rgba(0,0,0,0.12);
        transition: background 0.25s ease, transform 0.12s ease;
      }

      .notif-btn:hover { 
        background-color: #00ffb3; 
        transform: translateY(-2px); 
      }

      .notif-btn:active { 
        transform: translateY(0); 
      }

      .notif-btn svg { 
        width: 18px; 
        height: 18px; 
        color: white; 
        stroke: currentColor; 
      }

      .notif-badge {
        background: #ff3b3b;
        color: white;
        font-size: 0.7rem;
        font-weight: 700;
        border-radius: 999px;
        padding: 2px 6px;
        position: absolute;
        top: -6px;
        right: -6px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      }

      .notif-dropdown {
        position: absolute;
        right: 0;
        top: 48px; 
        width: 280px; 
        background: #ffffff;
        border-radius: 15px;
        box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        z-index: 1200;
        padding: 8px;
        display: none;
        font-family: 'Poppins', sans-serif;
        animation: fadeIn 0.18s ease;
      }

      .notif-dropdown .notif-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 12px;
        border-bottom: 1px solid #e6e6e6;
      }

      .notif-dropdown .notif-list {
        max-height: 260px;
        overflow-y: auto;
        padding: 8px 4px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .notif-dropdown .notif-entry {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        border-radius: 10px;
        text-decoration: none;
        color: #111;
        background: #f9fafb;
        transition: background 0.16s, transform 0.12s;
      }

      .notif-dropdown .notif-entry:hover {
        background: #f0fbf6;
        transform: translateY(-2px);
      }

      .notif-entry .notif-body {
        display: flex;
        flex-direction: column;
      }

      .notif-message {
        font-weight: 600;
        color: #1f1f1f;
        font-size: 0.95rem;
      }

      .notif-time {
        font-size: 0.78rem;
        color: #7a7a7a;
        margin-top: 2px;
      }

      .notif-entry.unread {
        background: #e8fff5;
      }

      .notif-header strong { 
        font-size: 0.98rem; color: #133; 
      }

      .profile-header {
        display: flex;
        align-items: center;
        padding: 1rem;
        border-bottom: 1px solid #e6e6e6;
      }

      .profile-header img {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        margin-right: 10px;
        border: 2px solid #2b6758;
      }

      .profile-header .info p {
        margin: 0;
        line-height: 1.2;
      }

      .profile-header .info .name {
        font-weight: 600;
        color: #2b6758;
      }

      .profile-header .info .role {
        font-size: 0.85rem;
        color: #777;
      }

      .dropdown-divider {
        height: 1px;
        background: #e6e6e6;
        margin: 5px 0;
      }

      .menu-item {
        padding: 10px 16px;
        display: flex;
        align-items: center;
        font-weight: 500;
        color: #333;
        cursor: pointer;
        transition: background 0.2s;
      }

      .menu-item:hover {
        background: #f5f8f6;
      }

      .menu-item i {
        margin-right: 10px;
        color: #2b6758;
        width: 20px;
      }

      .profile-container {
        position: relative;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        vertical-align: middle;
      }

      .profile-btn {
        background-color: #1f5d50;
        color: white;
        font-weight: 600;
        border: 2px solid #00ffb3;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        font-size: 16px;
        transition: background 0.22s ease, box-shadow 0.18s ease, transform 0.12s ease;
        overflow: hidden;
        position: relative;
        box-shadow: 0 2px 6px rgba(0,0,0,0.12);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        line-height: 0;
      }

      .profile-btn:hover {
        background-color: #00ffb3;
        transform: translateY(-2px);
      }
      .profile-btn:active { transform: translateY(0); }

      .profile-btn .profile-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        margin: 0 auto;
      }

      .profile-dropdown hr {
        border: 0;
        height: 1px;
        background-color: #e0e0e0;
        margin: 8px 0;
      }

      .profile-info {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 16px;
      }

      .profile-avatar {
        background-color: #2b6758;
        color: white;
        font-weight: 600;
        border-radius: 50%;
        width: 38px;
        height: 38px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }

      .avatar-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 50%;
      }

      .profile-text {
        display: flex;
        flex-direction: column;
      }

      .profile-name {
        font-weight: 600;
        color: #1f1f1f;
        font-size: 15px;
      }

      .profile-role {
        font-size: 13px;
        color: #6b7b75;
        font-weight: 500;
        margin-top: 2px;
      }

      .profile-menu {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      .profile-menu li {
        padding: 10px 16px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        color: #2b2b2b;
        font-size: 14px;
        transition: background 0.2s ease;
      }

      .profile-menu li:hover {
        background-color: #f0f8f5;
      }

      .financial-report-actions {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 30px;
        margin-bottom: 15px;

      }

      .check-budget-btn,
      .send-reminders-btn {
        border: none;
        border-radius: 6px;
        padding: 12px 20px;
        font-weight: 600;
        color: white;
        cursor: pointer;
        transition: background 0.3s ease, transform 0.2s;
        font-size: 14px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.12);

      }

      .check-budget-btn {
        background-color: #2b6758;
      }

      .check-budget-btn:hover {
        background-color: #00ffb3;
          transform: translateY(-2px);
      }

      .check-budget-btn:active {
        transform: translateY(0);
      }

      .send-reminders-btn {
        background-color: #245847;
      }

      .send-reminders-btn:hover {
        background-color: #00ffb3;
        transform: translateY(-2px);
      }

      .send-reminders-btn:active {
        transform: translateY(0);
      }

      .check-budget-btn {
        padding: 8px 16px;
        background-color: #1f5f4e;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
      }

      .bc-overlay {
        display: none;
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        backdrop-filter: blur(6px);
        justify-content: center;
        align-items: center;
        z-index: 1000;
        background: rgba(0,0,0,0.45);
      }

      .bc-modal {
        width: 90%;
        max-width: 900px;
        padding: 0;
        display: flex;
        flex-direction: column;
        background: #ffffff;
        border-radius: 20px;
        position: relative;
        overflow: hidden;
        animation: fadeIn 0.3s ease;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      }

      .bc-modal-header {
        background-color: #1f5f4e;
        color: white;
        padding: 18px 25px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .bc-modal-header h2 {
        margin: 0;
        font-size: 20px;
        font-weight: bold;
      }

      .bc-close-btn {
        background: none;
        border: none;
        font-size: 1.8rem;
        color: white;;
        cursor: pointer;
        line-height: 1;
        transition: color 0.3s;
      }

      .bc-close-btn:hover {
        color: #00ffb3; 
      }

      .bc-modal-content {
        padding: 25px;
      }

      .bc-status-row {
        display: flex;
        gap: 20px;
        margin-bottom: 25px;
      }

      .bc-status-box {
        flex: 1;
        padding: 15px;
        text-align: center;
        border-radius: 12px;
        font-weight: bold;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.12);
        transition: transform 0.25s ease, box-shadow 0.25s ease;
      }

      .bc-status-box:hover {
        transform: translateY(-5px); 
      }

      .bc-status-box h3 {
        margin: 0;
        font-size: 30px;
        font-weight: bold;
      }

      .pending { 
        background: white;  
      }

      .approved { 
        background: white; 
      }

      .rejected { 
        background: white; 
      }

      .bc-card {
        background: white;
        padding: 18px;
        margin-bottom: 15px;
        border-radius: 12px;
        border: 1px solid #ddd;
        position: relative;
        transition: background 0.3s, transform 0.2s;
      }

      .bc-card:hover {
        background-color: #ecfdf5;
        transform: scale(1.01);
      }
          
      .bc-card h4 {
        margin: 0 0 4px;
      }

     .bc-view-btn {
        position: absolute;
        top: 18px;
        right: 18px;
        background-color: #1f5f4e;
        color: white;
        border: none;
        padding: 12px 14px;
        border-radius: 6px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
      }

      .bc-view-btn:hover {
        background-color: #00ffb3;
        transform: translateY(-2px);
      }

      .bc-view-btn:active {
        transform: translateY(0);
      }

      .bd-modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        height: 100%;
        width: 100%;
        background: rgba(43, 103, 88, 0.25);
        backdrop-filter: blur(6px);
        justify-content: center;
        align-items: center;
        z-index: 99999;
        animation: fadeIn 0.25s ease;
      }

      .bd-modal-box {
        background: #ffffff;
        width: 90%;
        max-width: 480px;
        border-radius: 15px;
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        animation: scaleUp 0.3s ease;
      }

      .bd-modal-header {
        background: #1F5E4C;
        color: white;
        padding: 1rem 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .bd-modality h3 {
        font-size: 1.2rem;
        font-weight: 600;
      }

      .bd-modality {
        padding: 1.5rem 2rem;
      }

      .bd-modality p {
        font-size: 0.95rem;
        color: #333;
        margin: 0.6rem 0;
      }

      .bd-modality strong {
        color: #265c4f;
        font-weight: 600;
      }

      .bd-close-btn {
        background: none;
        border: none;
        font-size: 1.8rem;
        cursor: pointer;
        color: white;
        transition: color 0.3s;
      }
      
      .bd-close-btn:hover { 
        color: #00ffb3; 
      }

      .sr-overlay {
        display: none;
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        backdrop-filter: blur(6px);
        justify-content: center;
        align-items: center;
        z-index: 1000;
        background: rgba(0,0,0,0.45);
      }

      .sr-modal-box {
        width: 90%;
        max-width: 900px;
        padding: 0;
        display: flex;
        flex-direction: column;
        background: #ffffff;
        border-radius: 20px;
        position: relative;
        overflow: hidden;
        animation: fadeIn 0.3s ease;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      }

      .sr-header {
        background-color: #1f5f4e;
        color: white;
        padding: 18px 25px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .sr-header h2 {
        font-size: 20px;
        font-weight: 600;
      }

      .sr-close {
        background: none;
        border: none;
        font-size: 1.8rem;
        cursor: pointer;
        color: white;
        transition: color 0.3;
      }

      .sr-close:hover {
        color: #00ffb3; 
      }

      .sr-body {
        padding: 25px;
      }

      .sr-body label {
        font-weight: 600;
        display: block;
        margin-top: 14px;
      }

      #sr-recipient, #sr-subject, #sr-message {
        width: 100%;
        padding: 10px 12px;
        border-radius: 8px;
        border: 1px solid #bbbbbb;
        outline: none;
        margin-top: 5px;
        font-size: 15px;
      }

      #sr-recipient:focus,
      #sr-subject:focus,
      #sr-message:focus {
        border-color: #2b6758;
        box-shadow: 0 0 5px rgba(43, 103, 88, 0.3);
        outline: none;
      }

      #sr-message {
        resize: none;
      }

      .sr-error {
        color: #e74c3c;
        font-size: 13px;
        margin-top: 4px;
        margin-bottom: 0;
        display: none;
        font-weight: 500;
      }

      .sr-limit {
        font-size: 13px;
        color: #666;
        margin-top: 4px;
      }

      .sr-send-btn {
        width: 100%;
        background: #2b6758;
        color: white;
        font-weight: 600;
        border: none;
        border-radius: 7px;
        padding: 12px 0;
        margin-top: 20px;
        cursor: pointer;
        transition: 0.2s;
      }

      .sr-send-btn:hover {
        background-color: #00ffb3;
        transform: translateY(-2px);
      }

      .sr-send-btn:active {
        transform: translateY(0);
      }

      @keyframes fadeIn {
        from { 
          transform: scale(0.9); opacity: 0; 
        }

        to { 
          transform: scale(1); opacity: 1; 
        }
      }

      .es-overlay {
        display: none;
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        backdrop-filter: blur(6px);
        justify-content: center;
        align-items: center;
        z-index: 1000;
        background: rgba(0,0,0,0.45);
      }

      .es-modal-wide {
        width: 760px;
        background: #ffffff;
        border-radius: 14px;
        overflow: hidden;
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        animation: esPop 0.25s ease;
      }

      .es-modal-wide {
        width: 90%;
        max-width: 900px;
        padding: 0;
        display: flex;
        flex-direction: column;
        background: #ffffff;
        border-radius: 20px;
        position: relative;
        overflow: hidden;
        animation: fadeIn 0.3s ease;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      }

      .es-header {
        background-color: #1f5f4e;
        color: white;
        padding: 18px 25px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .es-header h2 {
        font-size: 20px;
        font-weight: 600;
      }

      .es-close-btn {
        background: none;
        border: none;
        font-size: 1.8rem;
        cursor: pointer;
        color: white;
        transition: color 0.3;
      }

      .es-close-btn:hover {
        color: #00ffb3; 
      }

      .es-body {
        padding: 25px 30px;
      }

      .es-label {
        font-weight: 600;
        margin-bottom: 6px;
        display: block;
        margin-top: 15px;
      }

      .select.es-input {
        width: 100%;
        padding: 10px 12px;
        border-radius: 8px;
        border: 1px solid #bbbbbb;
        outline: none;
        margin-top: 5px;
        font-size: 15px;
      }

      .es-input {
        width: 100%;
        padding: 10px 12px;
        border-radius: 8px;
        border: 1px solid #bbbbbb;
        outline: none;
        margin-top: 5px;
        font-size: 15px;

        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;

        background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4 6l4 4 4-4' fill='%23215c4f' /%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 22px center;
        background-size: 14px;

        padding-right: 50px; 
      }

      .es-input:focus, .es-textarea:focus {
        border-color: #2b6758;
        box-shadow: 0 0 5px rgba(43, 103, 88, 0.3);
        outline: none;
      }

      .es-textarea {
        width: 100%;
        height: 110px;
        padding: 12px;
        border: 1px solid #cfcfcf;
        border-radius: 6px;
        font-size: 15px;
        resize: none;
      }

      .es-radio-group {
        display: flex;
        gap: 30px;
        margin-bottom: 8px;
      }

      .es-radio-item {
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .es-check-group {
        margin-top: 12px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .es-err {
        color: #e74c3c;
        font-size: 13px;
        height: 14px;
        margin-top: 4px;
        font-weight: 500;
      }

      .es-save-wide {
        width: 100%;
        background: #2b6758;
        color: white;
        font-weight: 600;
        border: none;
        border-radius: 7px;
        padding: 12px 0;
        margin-top: 20px;
        cursor: pointer;
        transition: 0.2s;
      }

      .es-save-wide:hover {
        background-color: #255a4b;
        transform: translateY(-2px);
      }

      .es-save-wide:active {
        transform: translateY(0);
      }

      @keyframes esPop {
        from { 
          transform: scale(0.85); opacity: 0; 
        }

        to { 
          transform: scale(1); opacity: 1; 
        }
      }
    </style>
  </head>

    <body>
      <header>
        <div class="logo">
          <img src="assets/img/logo.jpg" alt="OrgBoard Logo" class="orgboard-logo" />
          <div>
            <h1>ORGBOARD</h1>
            <p>Campus Finance Hub</p>
          </div>
        </div>
        <div class="icons">
          <button id="mobileMenuBtn" class="mobile-menu-btn" aria-expanded="false" aria-controls="mobileNav" aria-label="Open menu">â˜°</button>

          <div class="notif-container" style="position:relative;">
            <button id="notifBtn" class="notif-btn" aria-label="Notifications" title="Notifications">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M15 17H9a3 3 0 0 1-3-3v-3c0-3.07 1.63-5.64 4.5-6.32V4a1.5 1.5 0 0 1 3 0v.68C16.37 5.36 18 7.92 18 11v3a3 3 0 0 1-3 3z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span class="notif-badge" id="notifBadge" style="display:none;">3</span>
            </button>

            <div class="notif-dropdown" id="notifDropdown" aria-hidden="true">
              <div class="notif-header">
                <strong>Notifications</strong>
                <div>
              <script src="assets/js/avatar.js"></script>
                  <button id="markAllRead" class="orgboard-btn" style="padding:6px 10px; min-width: auto; font-size:0.82rem;">Mark all read</button>
                </div>
              </div>

              <div class="notif-list" id="notifList">
                <a href="#" class="notif-entry unread" data-id="1">
                  <div class="notif-body">
                    <div class="notif-message">New budget request submitted</div>
                    <div class="notif-time">2m ago</div>
                  </div>
                </a>
                <a href="#" class="notif-entry unread" data-id="2">
                  <div class="notif-body">
                    <div class="notif-message">Event approved by finance</div>
                    <div class="notif-time">1h ago</div>
                  </div>
                </a>
                <a href="#" class="notif-entry" data-id="3">
                  <div class="notif-body">
                    <div class="notif-message">Reminder: Submit reports</div>
                    <div class="notif-time">Yesterday</div>
                  </div>
                </a>
              </div>

              <div style="padding:10px; border-top:1px solid #eee; display:flex; justify-content:center;">
                <button class="orgboard-btn" id="viewAllNotif">View all</button>
              </div>
            </div>
          </div>

    <div class="profile-container">
      <button class="profile-btn" id="profileBtn">
        <img id="profileImage" class="profile-img" src="" alt="Profile" style="display:none;">
        <i id="profileInitial" class="bi bi-person" aria-hidden="true" style="font-size:1.05rem;color:white;"></i>
      </button>

      <div class="profile-dropdown" id="profileDropdown">
        <div class="profile-info">
          <div class="profile-avatar" id="profileAvatar">
            <img id="dropdownImage" class="avatar-img" src="" alt="Profile" style="display:none;">
            <i id="dropdownInitial" class="bi bi-person" aria-hidden="true" style="font-size:0.95rem;color:white;"></i>
          </div>
          <div class="profile-text">
            <div class="profile-name" id="profileName">Username</div>
            <div class="profile-role" id="profileRole">Student</div>
          </div>
        </div>
        <hr />
        <script>
          (function(){
            try{
              const data = localStorage.getItem('orgboardAvatar');
              const storedRole = (localStorage.getItem('orgboardRole')||'').toLowerCase();
              const storedOfficer = (localStorage.getItem('orgboardOfficer')||'').toLowerCase();
              if(!data) return;
              const pageRoleEl = document.getElementById('profileRole');
              const pageRole = pageRoleEl ? pageRoleEl.textContent.trim().toLowerCase() : '';
              let show = false;
              if(storedRole === 'officer') {
                if(storedOfficer && pageRole.includes(storedOfficer)) show = true;
              } else if(storedRole) {
                if(pageRole.includes(storedRole)) show = true;
              }
              if(!show) return;
              const pi = document.getElementById('profileImage');
              const di = document.getElementById('dropdownImage');
              const piInitial = document.getElementById('profileInitial');
              const diInitial = document.getElementById('dropdownInitial');
              if(pi){ pi.src = data; pi.style.display = 'block'; if(piInitial) piInitial.style.display = 'none'; }
              if(di){ di.src = data; di.style.display = 'block'; if(diInitial) diInitial.style.display = 'none'; }
            }catch(e){/* ignore */}
          })();
        </script>
        <ul class="profile-menu">
          <li id="logoutBtn" class="logout"><i class="fa-solid fa-right-from-bracket"></i> Log Out</li>
        </ul>
      </div>
    </div>

    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>


        </div>
      </header>

      <nav class="desktop-nav">
        <a href="#dashboardSection" id="dashboardLink">Dashboard</a>
        <a href="#progressSection" id="progressLink">Progress Tracking</a>
        <a href="#financialReportSection" id="financialLink">Financial Report</a>
        <span class="welcome-back">WELCOME BACK, USER!</span>
      </nav>

      <aside id="mobileNav" class="mobile-nav" aria-hidden="true">
        <a href="#dashboardSection" id="m_dashboardLink">Dashboard</a>
        <a href="#progressSection" id="m_progressLink">Progress Tracking</a>
        <a href="#financialReportSection" id="m_financialLink">Financial Report</a>
      </aside>
      <div id="mobileOverlay" class="mobile-overlay" tabindex="-1" aria-hidden="true"></div>

      <style>
        nav a.active{color:#00ffb3;font-weight:700;text-decoration:none;}
        .mobile-menu-btn{display:none;background:none;border:none;color:white;font-size:1.6rem;padding:6px 10px;cursor:pointer}
        .mobile-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.45);z-index:90;transition:opacity .25s}
        .mobile-nav{position:fixed;top:0;right:0;height:100vh;width:260px;background:#265c4f;color:white;transform:translateX(110%);transition:transform .32s ease,z-index .01s;z-index:95;padding:1.2rem 1rem;display:flex;flex-direction:column;gap:12px}
        .mobile-nav a{color:white;text-decoration:none;font-weight:600;padding:10px 6px;border-radius:8px}
        .mobile-nav a:hover{background:#234a3f;color:#fff}
        .mobile-nav.open{transform:translateX(0)}
        .mobile-overlay.show{display:block;opacity:1}
        /* On small screens: set explicit ordering for icons so notif appears before profile */
        @media (max-width: 768px){
          .desktop-nav{display:none}
          .mobile-menu-btn{display:inline-flex}
          header{padding:0.6rem 0.9rem}
          .icons{display:flex;align-items:center;gap:12px}
          .icons .notif-container{order:1}
          .icons .profile-container{order:2}
          .icons .mobile-menu-btn{order:3}
        }
        @media (min-width: 769px){.mobile-nav{display:none}.mobile-overlay{display:none}}
      </style>

      <script>
        (function(){try{const anyActive=document.querySelector('nav a.active'); const dash=document.getElementById('dashboardLink'); if(!anyActive&&dash) dash.classList.add('active');}catch(e){console.error(e)} const params=new URLSearchParams(window.location.search); const section=(params.get('section')||'dashboard').toLowerCase(); const mapping={dashboard:'dashboardLink',progress:'progressLink',financial:'financialLink'}; Object.values(mapping).forEach(id=>{const el=document.getElementById(id); if(el) el.classList.remove('active');}); const activeEl=document.getElementById(mapping[section]||mapping.dashboard); if(activeEl) activeEl.classList.add('active'); const mobileMapping={dashboard:'m_dashboardLink',progress:'m_progressLink',financial:'m_financialLink'}; Object.values(mobileMapping).forEach(id=>{const el=document.getElementById(id); if(el) el.classList && el.classList.remove('active');}); const activeMobile=document.getElementById(mobileMapping[section]||mobileMapping.dashboard); if(activeMobile) activeMobile.classList.add('active');})();
      (function(){
        const btn=document.getElementById('mobileMenuBtn');
        const mobileNav=document.getElementById('mobileNav');
        const overlay=document.getElementById('mobileOverlay');
        if(!btn||!mobileNav||!overlay) return;

        function openNav(){
          mobileNav.classList.add('open');
          overlay.classList.add('show');
          btn.setAttribute('aria-expanded','true');
          mobileNav.setAttribute('aria-hidden','false');
          document.body.style.overflow='hidden';
        }

        function closeNav(){
          mobileNav.classList.remove('open');
          overlay.classList.remove('show');
          btn.setAttribute('aria-expanded','false');
          mobileNav.setAttribute('aria-hidden','true');
          document.body.style.overflow='';
        }

        btn.addEventListener('click', function(){
          if(mobileNav.classList.contains('open')) closeNav(); else openNav();
        });

        overlay.addEventListener('click', closeNav);

        const desktopIds=['dashboardLink','progressLink','financialLink'];
        const mobileIds=['m_dashboardLink','m_progressLink','m_financialLink'];
        const hashToDesktop={'#dashboardSection':'dashboardLink','#progressSection':'progressLink','#financialReportSection':'financialLink'};

        // Make mobile links call desktop link handlers so sections switch correctly
        mobileNav.querySelectorAll('a').forEach(a=>a.addEventListener('click', function(e){
          e.preventDefault();
          const href = a.getAttribute('href') || '';
          const targetDesktop = hashToDesktop[href];

          // Close the mobile menu first
          closeNav();

          setTimeout(()=>{
            try{
              if(targetDesktop){
                const desktopEl = document.getElementById(targetDesktop);
                if(desktopEl) desktopEl.click();
              }
              if(href){
                const targetEl = document.querySelector(href);
                if(targetEl) targetEl.scrollIntoView({behavior:'smooth', block:'start'});
                if(history && history.replaceState) history.replaceState(null, '', href);
              }
            }catch(err){ console.error(err); }
          }, 200);
        }));

        document.addEventListener('keydown', function(e){ if(e.key==='Escape') closeNav(); });
      })();
      </script>

      <style>nav a.active{color:#00ffb3;font-weight:700;text-decoration:none;}</style>
      <script>
        (function(){
          try{
            const anyActive = document.querySelector('nav a.active');
            const dash = document.getElementById('dashboardLink');
            if(!anyActive && dash) dash.classList.add('active');
          }catch(e){console.error(e)}
        })();
      </script>

    <section id="dashboardSection">
      <section class="dashboard-cards">
        <div class="card red-card"><p>â‚±50,000 / â‚±100,000</p><p class="heading">Budget Used</p></div>
        <div class="card green-card"><p>3</p><p class="heading">Ongoing Project</p></div>
        <div class="card blue-card"><p>5</p><p class="heading">Completed Project</p></div>
        <div class="card yellow-card"><p>2</p><p class="heading">Pending Report</p></div>
      </section>

      <section class="main-grid">
        <div class="box" id="progressSection">
          <h2>Project Time Progress Tracking for October</h2>
          <button class="dashboard-view-btn">View</button>
          <canvas id="progressChart" height="180"></canvas>
        </div>

        <div class="box">
          <h2>Events Updates & Announcement</h2>
          <button class="dashboard-view-btn" id="eventsViewBtn">View</button>

          <a href="#" class="event-item">
            <p><strong>Outreach Project Planning</strong></p>
            <div class="event-details">
              <span>Nov. 10, Manggahan</span>
              <em class="status">Upcoming</em>
            </div>
          </a>

          <a href="#" class="event-item">
            <p><strong>Orientation</strong></p>
            <div class="event-details">
              <span>Nov. 15, Social Hall</span>
              <em class="status">Upcoming</em>
            </div>
          </a>
        </div>

        <div class="box">
          <h2>Notifications</h2>
          <button class="dashboard-view-btn">View</button>
          <a href="#" class="notif-item"><p><strong>Budget for outreach Project awaiting approval.</strong></p></a>
          <a href="#" class="notif-item"><p><strong>Financial report due next week</strong></p></a>
          <a href="#" class="notif-item"><p><strong>New event posted by treasurer.</strong></p></a>
        </div>

        <div class="box">
          <h2>Recent Financial Reports</h2>
          <button class="dashboard-view-btn">View</button>
          <table>
      <thead>
        <tr>
          <th>Reports</th>
          <th>Date Submitted</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Oct Event</td>
          <td>Oct. 30, 2025</td>
          <td class="status-pending">Pending</td>
          <td><button class="financial-view-btn">View</button></td>
        </tr>
        <tr>
          <td>Sep Supplies</td>
          <td>Sep. 5, 2025</td>
          <td class="status-approved">Approved</td>
          <td><button class="financial-view-btn">View</button></td>
        </tr>
        <tr>
          <td>Aug Event</td>
          <td>Aug. 16, 2025</td>
          <td class="status-approved">Approved</td>
          <td><button class="financial-view-btn">View</button></td>
        </tr>
      </tbody>
    </table>

        </div>
      </section>
    </section>

    <section id="financialReportSection">
      <div class="filter-container">

        <div class="filter-row search-row">
      <div class="search-wrapper">
        <input type="text" id="searchInput" placeholder="Search financial reports..." />
        <button id="searchBtn" class="search-btn" aria-label="Search">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round"
              class="search-icon">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </button>
      </div>
    </div>

        <div class="filter-row dropdown-row">
          <select id="monthFilter">
            <option value="">Select Month / Year</option>
            <option>Oct 2025</option>
            <option>Nov 2025</option>
          </select>
          <select id="projectFilter">
            <option value="">Select Project / Event</option>
            <option>Campus Fair</option>
            <option>Outreach Program</option>
            <option>Materials Purchase</option>
            <option>Sports Fest</option>
          </select>
          <select id="reportFilter">
            <option value="">Select Report / Name / ID</option>
            <option>Fundraising Income</option>
            <option>Venue Rental</option>
            <option>Materials Purchase</option>
            <option>Sponsorship</option>
          </select>
        </div>
      </div>

      <div class="table-card">
        <div class="table-responsive">
        <table class="finance-table">
          <thead>
            <tr>
              <th>Project/Event</th>
              <th>Date</th>
              <th>Report Title</th>
              <th>Type</th>
              <th>Amount</th>
              <th>Status</th>
              <th>Remarks</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Campus Fair</td>
              <td>Oct 01, 2025</td>
              <td>Fundraising Income</td>
              <td>Income</td>
              <td>â‚±25,000</td>
              <td class="status-approved">Approved</td>
              <td>-</td>
                  <td class="action-cell">
          <button class="orgboard-btn">View</button>
        </td>
            </tr>
            <tr>
              <td>Outreach Program</td>
              <td>Oct 05, 2025</td>
              <td>Venue Rental</td>
              <td>Expense</td>
              <td>â‚±10,000</td>
              <td class="status-approved">Approved</td>
              <td>Event A</td>
                  <td class="action-cell">
          <button class="orgboard-btn">View</button>
        </td>
            </tr>
            <tr>
              <td>Materials Purchase</td>
              <td>Oct 07, 2025</td>
              <td>Materials Purchase</td>
              <td>Expense</td>
              <td>â‚±7,500</td>
              <td class="status-pending">Pending</td>
              <td>Needs Receipt</td>
                  <td class="action-cell">
          <button class="orgboard-btn">View</button>
        </td>
            </tr>
            <tr>
              <td>Sports Fest</td>
              <td>Oct 10, 2025</td>
              <td>Sponsorship</td>
              <td>Income</td>
              <td>â‚±15,000</td>
              <td class="status-approved">Approved</td>
              <td>From Alumni Org</td> 
              <td class="action-cell">
              <button class="orgboard-btn">View</button>

              </td>
            </tr>
          </tbody>
        </table>
        </div>
      </div>

        <div class="financial-report-actions">
          <button class="check-budget-btn" onclick="bc_openModal()">Check Budget</button>
          <button class="send-reminders-btn" onclick="sr_open()">Send Reminder</button>

        </div>
    </section>

    <section id="progressTrackingSection" style="display: none;">
      <div class="progress-wrapper">
        <div class="table-responsive">
        <table class="finance-table">
          <thead>
            <tr>
              <th>Event Project</th>
              <th>Budget Used</th>
              <th>Progress</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Campus Fair</td>
              <td>â‚±20,000 / â‚±25,000</td>
              <td>
                <div class="progress-container">
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: 83%;"></div>
                  </div>
                  <span class="progress-percent">83%</span>
                </div>
              </td>
              <td class="center-btn">
                <button class="table-btn" onclick="es_openModal()">View</button>
            </td>
            </tr>
            <tr>
              <td>Outreach Program</td>
              <td>â‚±8,000 / â‚±10,000</td>
              <td>
                <div class="progress-container">
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: 50%;"></div>
                  </div>
                  <span class="progress-percent">50%</span>
                </div>
              </td>
              <td class="center-btn">
                <button class="table-btn" onclick="es_openModal()">View</button>
            </td>
            </tr>
            <tr>
              <td>Sports Fest</td>
              <td>â‚±12,000 / â‚±15,000</td>
              <td>
                <div class="progress-container">
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: 100%;"></div>
                  </div>
                  <span class="progress-percent">100%</span>
                </div>
              </td>
              <td class="center-btn">
                <button class="table-btn" onclick="es_openModal()">View</button>
            </td>
            </tr>
          </tbody>
        </table>
        </div>
      </div>
    </section>

      <div class="modal-overlay" id="eventsModal">
        <div class="modal">
          <div class="modal-header">
            <input type="text" placeholder="Search Events and Announcements" />
              <div style="display: flex; align-items: center; gap: 10px;">
                <button id="refreshModal" class="refresh-btn">âŸ³</button>
                <button class="close-modal" id="closeModal">&times;</button>
              </div>
          </div>

          <div class="modal-content">
            <div>
              <h3>Upcoming Events</h3>
              <div class="event-card">
                <h4>Campus Fair</h4>
                <p>November 5, 2025</p>
                <div class="event-status-1">Ongoing</div>
                <button class="view-details">View Details</button>
              </div>
              <div class="event-card">
                <h4>Leadership Summit</h4>
                <p>November 12, 2025</p>
                <div class="event-status-2">Upcoming</div>
                <button class="view-details">View Details</button>
              </div>
              <div class="event-card">
                <h4>Outreach Program</h4>
                <p>October 29, 2025</p>
                <div class="event-status-3">Completed</div>
                <button class="view-details">View Details</button>
              </div>
            </div>

            <div>
              <h3>Announcement Feed</h3>
              <div class="event-card">
                <h4>ðŸ“¢[Nov 1]</h4>
                <p>Budget for Sports Fest has been approved! Prepare your Teams.</p>
              </div>
              <div class="event-card">
                <h4>ðŸ“¢[Oct 28]</h4>
                <p>Deadline for organization reports extended to Nov 3.</p>
              </div>
              <div class="event-card">
                <h4>ðŸ“¢[Oct 31]</h4>
                <p>Reminder: Campus Fair participant registration closes tomorrow.</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="details-float" id="detailsFloat">
        <div class="details-content">
          <div class="details-header">
            <h3 id="detailsTitle">Event Details</h3>
            <button class="close-modal" id="closeDetails">&times;</button>
          </div>

          <div class="details-body">
            <p><strong>Event:</strong> <span id="eventName">Outreach Program</span></p>
            <p><strong>Date:</strong> <span id="eventDate">Oct 29, 2025</span></p>
            <p><strong>Budget:</strong> <span id="eventBudget">â‚±10,000</span></p>
            <p><strong>Status:</strong> <span id="eventStatus">Complete</span></p>
          </div>
        </div>
      </div>

    <div id="bc-modal-overlay" class="bc-overlay">
        <div class="bc-modal">

            <div class="bc-modal-header">
                <h2>Budget Check</h2>
                <button class="bc-close-btn" onclick="bc_closeModal()">&times;</button>
            </div>

            <div class="bc-modal-content">

                <div class="bc-status-row">
                    <div class="bc-status-box pending">
                        <h3>4</h3>
                        <p class="heading">Pending Request</p>
                    </div>
                    <div class="bc-status-box approved">
                        <h3>8</h3>
                        <p class="heading">Approved Budgets</p>
                    </div>
                    <div class="bc-status-box rejected">
                        <h3>2</h3>
                        <p class="heading">Rejected</p>
                    </div>
                </div>

                <div class="bc-card">
                    <h4>Social Work Org</h4>
                    <p>Outreach Project</p>
                    <div class="status-pending">Pending</div>
                    <button class="bc-view-btn" onclick="openSocialWork()">View Details</button>
                </div>

                <div class="bc-card">
                    <h4>Social Club</h4>
                    <p>Research Symposium</p>
                    <div class="status-approved">Approved</div>
                    <button class="bc-view-btn" onclick="openSocialClub()">View Details</button>
                </div>

                <div class="bc-card">
                    <h4>Arts Society</h4>
                    <p>Music Fest</p>
                    <div class="status-rejected">Rejected</div>
                    <button class="bc-view-btn" onclick="openArtSociety()">View Details</button>
                </div>
            </div>
        </div>
    </div>

    <div id="budgetSocialWork" class="bd-modal-overlay">
      <div class="bd-modal-box">
        
        <div class="bd-modal-header">
          <h3>Budget Details</h3>
          <button class="bd-close-btn" onclick="closeSocialWork()">Ã—</button>
        </div>

        <div class="bd-modality">
          <p><strong>Organization:</strong> Social Work Org</p>
          <p><strong>Event:</strong> Outreach Project</p>
          <p><strong>Requested:</strong> â‚±25,000</p>
          <p><strong>Purpose:</strong> Venue and Logistics</p>
          <p><strong>Treasurerâ€™s Note:</strong> For November Outreach</p>
        </div>

      </div>
    </div>

    <div id="budgetSocialClub" class="bd-modal-overlay">
      <div class="bd-modal-box">
        
        <div class="bd-modal-header">
          <h3>Budget Details</h3>
          <button class="bd-close-btn" onclick="closeSocialClub()">Ã—</button>
        </div>

        <div class="bd-modality">
          <p><strong>Organization:</strong> Social Club</p>
          <p><strong>Event:</strong> Research Synposium</p>
          <p><strong>Requested:</strong> â‚±10,000</p>
          <p><strong>Purpose:</strong> Venue</p>
          <p><strong>Treasurerâ€™s Note:</strong> For December Synposium</p>
        </div>

      </div>
    </div>

    <div id="budgetArtSociety" class="bd-modal-overlay">
      <div class="bd-modal-box">
        
        <div class="bd-modal-header">
          <h3>Budget Details</h3>
          <button class="bd-close-btn" onclick="closeArtSociety()">Ã—</button>
        </div>

        <div class="bd-modality">
          <p><strong>Organization:</strong> Art Society</p>
          <p><strong>Event:</strong> Music Fest</p>
          <p><strong>Requested:</strong> â‚±15,000</p>
          <p><strong>Purpose:</strong> Logistics</p>
          <p><strong>Treasurerâ€™s Note:</strong> For November Fest</p>
        </div>

      </div>
    </div>

    <div id="sr-modal-overlay" class="sr-overlay">
      <div class="sr-modal-box">
        
        <div class="sr-header">
          <h2>Send Reminder</h2>
          <span class="sr-close" onclick="sr_close()">&times;</span>
        </div>

        <div class="sr-body">

          <label>Recipient</label>
          <input type="text" id="sr-recipient" autocomplete="off">
          <p class="sr-error" id="sr-recipient-error"></p>

          <label>Subject</label>
          <input type="text" id="sr-subject" autocomplete="off">
          <p class="sr-error" id="sr-subject-error"></p>

          <label>Message</label>
          <textarea id="sr-message" rows="5"></textarea>
          <p class="sr-error" id="sr-message-error"></p>

          <p class="sr-limit" id="sr-message-limit"></p>

          <button class="sr-send-btn" onclick="sr_send()">Send</button>

        </div>
      </div>
    </div>

    <div id="esModalOverlay" class="es-overlay">
      <div class="es-modal-wide">

        <div class="es-header">
          <h2>Event Status Update</h2>
          <span class="es-close-btn" onclick="es_closeModal()">Ã—</span>
        </div>

        <div class="es-body">

          <label class="es-label">Event Type</label>
          <div class="es-radio-group">
            <label class="es-radio-item">
              <input type="radio" name="esEventType" value="Major Event">
              <span>Major Event</span>
            </label>
            <label class="es-radio-item">
              <input type="radio" name="esEventType" value="Minor Event">
              <span>Minor Event</span>
            </label>
          </div>
          <p class="es-err" id="esErrType"></p>

          <label class="es-label">Current Status</label>
          <select id="esCurrentStatus" class="es-input">
            <option value="">Select Status</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
            <option value="Cancelled">Cancelled</option>
            <option value="Pending">Pending</option>
          </select>
          <p class="es-err" id="esErrStatus"></p>

          <div class="es-check-group">
            <label><input type="checkbox" id="esPendingReview"> Pending Review</label>
            <label><input type="checkbox" id="esRequiresFollowUp"> Requires Follow-Up</label>
          </div>

          <label class="es-label">Notes / Updates</label>
          <textarea id="esNotes" maxlength="250" class="es-textarea"></textarea>
          <p class="es-err" id="esErrNotes"></p>

          <button class="es-save-wide" onclick="es_saveChanges()">Save</button>

        </div>
      </div>
    </div>

    <script>
      const ctx = document.getElementById("progressChart").getContext("2d");
      new Chart(ctx, {
        type: "line",
        data: {
          labels: ["", "", "", "", "", "", ""],
          datasets: [{
            label: "Progress",
            data: [5000, 10000, 18000, 26000, 37000, 49000, 54000],
            borderColor: "#2b6758",
            backgroundColor: "rgba(43, 103, 88, 0.2)",
            fill: true,
            tension: 0.4,
            borderWidth: 2,
            pointRadius: 5,
            pointBackgroundColor: "#2b6758",
          }],
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: {
            x: { grid: { display: false }, ticks: { display: false } },
            y: { beginAtZero: true, ticks: { color: "#555" }, grid: { color: "#eee" } },
          },
        },
      });

      const modal = document.getElementById("eventsModal");
      const openModal = document.getElementById("eventsViewBtn");
      const closeModal = document.getElementById("closeModal");

      openModal?.addEventListener("click", () => {
        modal.style.display = "flex";
        document.body.style.overflow = "hidden";
      });

      closeModal?.addEventListener("click", () => {
        modal.style.display = "none";
        document.body.style.overflow = "auto";
      });

      window.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.style.display = "none";
          document.body.style.overflow = "auto";
        }
      });

      const searchInput = document.querySelector(".modal-header input");
      const eventCards = document.querySelectorAll(".modal-content .event-card");

      searchInput?.addEventListener("input", () => {
        const query = searchInput.value.toLowerCase().trim();
        eventCards.forEach(card => {
          const text = card.innerText.toLowerCase();
          card.style.display = text.includes(query) ? "block" : "none";
        });
      });

      const refreshBtn = document.getElementById("refreshModal");
      refreshBtn?.addEventListener("click", () => {
        refreshBtn.style.transform = "rotate(360deg)";
        setTimeout(() => (refreshBtn.style.transform = "rotate(0deg)"), 500);
        searchInput.value = "";
        eventCards.forEach((card, index) => {
          card.style.display = "block";
          card.classList.remove("refresh-anim");
          void card.offsetWidth;
          card.classList.add("refresh-anim");
          card.style.animationDelay = `${index * 0.1}s`;
        });
      });

      const detailsFloat = document.getElementById("detailsFloat");
      const closeDetails = document.getElementById("closeDetails");
      const eventName = document.getElementById("eventName");
      const eventDate = document.getElementById("eventDate");
      const eventBudget = document.getElementById("eventBudget");
      const eventStatus = document.getElementById("eventStatus");
      const detailsTitle = document.getElementById("detailsTitle");

      const eventInfo = {
        "Campus Fair": { date: "November 5, 2025", budget: "â‚±25,000", status: "Ongoing" },
        "Leadership Summit": { date: "November 12, 2025", budget: "â‚±15,000", status: "Upcoming" },
        "Outreach Program": { date: "October 29, 2025", budget: "â‚±10,000", status: "Completed" }
      };

      document.querySelectorAll(".event-card").forEach(card => {
        const button = card.querySelector(".view-details");
        const title = card.querySelector("h4")?.textContent?.trim();
        if (button && eventInfo[title]) {
          button.addEventListener("click", () => {
            const info = eventInfo[title];
            eventName.textContent = title;
            eventDate.textContent = info.date;
            eventBudget.textContent = info.budget;
            eventStatus.textContent = info.status;
            detailsTitle.textContent = "Event Details";
            detailsFloat.style.display = "flex";
            document.body.style.overflow = "hidden";
          });
        }
      });

      closeDetails?.addEventListener("click", () => {
        detailsFloat.style.display = "none";
        document.body.style.overflow = "auto";
      });

      window.addEventListener("click", (e) => {
        if (e.target === detailsFloat) {
          detailsFloat.style.display = "none";
          document.body.style.overflow = "auto";
        }
      });

      const dashboardSection = document.getElementById("dashboardSection");
      const financialReportSection = document.getElementById("financialReportSection");
      const progressTrackingSection = document.getElementById("progressTrackingSection"); // â¬… added
      const summaryCards = document.querySelector(".dashboard-cards");
      const dashboardLink = document.getElementById("dashboardLink");
      const financialLink = document.getElementById("financialLink");
      const progressLink = document.getElementById("progressLink"); // â¬… added

      financialReportSection.style.display = "none";
      progressTrackingSection.style.display = "none";

      function setActiveLink(link) {
        document.querySelectorAll("nav a").forEach(a => a.classList.remove("active"));
        link.classList.add("active");
      }

      dashboardLink?.addEventListener("click", (e) => {
        e.preventDefault();
        dashboardSection.style.display = "block";
        financialReportSection.style.display = "none";
        progressTrackingSection.style.display = "none";
        summaryCards.style.display = "grid";
        setActiveLink(dashboardLink);
      });

      financialLink?.addEventListener("click", (e) => {
        e.preventDefault();
        dashboardSection.style.display = "none";
        financialReportSection.style.display = "block";
        progressTrackingSection.style.display = "none";
        summaryCards.style.display = "none";
        setActiveLink(financialLink);
      });

      progressLink?.addEventListener("click", (e) => {
        e.preventDefault();
        dashboardSection.style.display = "none";
        financialReportSection.style.display = "none";
        progressTrackingSection.style.display = "block";
        summaryCards.style.display = "none";
        setActiveLink(progressLink);
      });

      document.addEventListener("DOMContentLoaded", () => {
        const searchInput = document.getElementById("searchInput");
        const monthFilter = document.getElementById("monthFilter");
        const projectFilter = document.getElementById("projectFilter");
        const reportFilter = document.getElementById("reportFilter");
        const tableRows = document.querySelectorAll(".finance-table tbody tr");

        function filterTable() {
          const searchValue = searchInput.value.toLowerCase();
          const monthValue = monthFilter.value.toLowerCase();
          const projectValue = projectFilter.value.toLowerCase();
          const reportValue = reportFilter.value.toLowerCase();

          tableRows.forEach((row) => {
            const text = row.textContent.toLowerCase();
            const matchSearch = text.includes(searchValue);
            const matchMonth = !monthValue || text.includes(monthValue);
            const matchProject = !projectValue || text.includes(projectValue);
            const matchReport = !reportValue || text.includes(reportValue);
            row.style.display = matchSearch && matchMonth && matchProject && matchReport ? "" : "none";
          });
        }

        searchInput?.addEventListener("input", filterTable);
        monthFilter?.addEventListener("change", filterTable);
        projectFilter?.addEventListener("change", filterTable);
        reportFilter?.addEventListener("change", filterTable);
      });

      const userData = {
        name: localStorage.getItem("userName") || "User",
        role: localStorage.getItem("userRole") || "Finance Committee",
        image: localStorage.getItem("userImage") || ""
      };

      const nameDisplay = document.getElementById("profileName");
      const roleDisplay = document.getElementById("profileRole");
      const profileBtnImg = document.getElementById("profileImage");
      const dropdownImg = document.getElementById("dropdownImage");
      const profileBtnInitial = document.getElementById("profileInitial");
      const dropdownInitial = document.getElementById("dropdownInitial");

      nameDisplay.textContent = userData.name;
      roleDisplay.textContent = userData.role;
      // Keep the Bootstrap person icon visible when no profile image is set
      if (profileBtnInitial) profileBtnInitial.style.display = 'inline-flex';
      if (dropdownInitial) dropdownInitial.style.display = 'inline-flex';

      if (userData.image) {
        profileBtnImg.src = userData.image;
        dropdownImg.src = userData.image;
        profileBtnImg.style.display = "block";
        dropdownImg.style.display = "block";
        profileBtnInitial.style.display = "none";
        dropdownInitial.style.display = "none";
      }

      const profileBtn = document.getElementById("profileBtn");
      const dropdown = document.getElementById("profileDropdown");

      profileBtn.addEventListener("click", () => {
        dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
      });

      document.addEventListener("click", (e) => {
        if (!profileBtn.contains(e.target) && !dropdown.contains(e.target)) {
          dropdown.style.display = "none";
        }
      });

      const notifBtnEl = document.getElementById('notifBtn');
      const notifDropdownEl = document.getElementById('notifDropdown');
      const notifBadgeEl = document.getElementById('notifBadge');

      if (notifBadgeEl) {
        const count = 3; 
        if (count > 0) {
          notifBadgeEl.textContent = String(count);
          notifBadgeEl.style.display = 'inline-block';
        }
      }

      if (notifBtnEl && notifDropdownEl) {
        notifBtnEl.addEventListener('click', (ev) => {
          ev.stopPropagation();
          const isOpen = notifDropdownEl.style.display === 'block';
          if (dropdown && dropdown.style.display === 'block') dropdown.style.display = 'none';
          notifDropdownEl.style.display = isOpen ? 'none' : 'block';
        });

        document.addEventListener('click', (e) => {
          if (!notifBtnEl.contains(e.target) && !notifDropdownEl.contains(e.target)) {
            notifDropdownEl.style.display = 'none';
          }
        });
      }

      function updateBadgeCount() {
        const list = document.querySelectorAll('#notifList .notif-entry.unread');
        const count = list.length;
        if (notifBadgeEl) {
          notifBadgeEl.textContent = String(count);
          notifBadgeEl.style.display = count > 0 ? 'inline-block' : 'none';
        }
      }

      const markAllBtn = document.getElementById('markAllRead');
      if (markAllBtn) {
        markAllBtn.addEventListener('click', (ev) => {
          ev.preventDefault();
          ev.stopPropagation();
          document.querySelectorAll('#notifList .notif-entry.unread').forEach(el => el.classList.remove('unread'));
          updateBadgeCount();
        });
      }

      document.addEventListener('click', (e) => {
        const entry = e.target.closest && e.target.closest('.notif-entry');
        if (entry && document.getElementById('notifList')?.contains(entry)) {
          e.preventDefault();
          entry.classList.remove('unread');
          updateBadgeCount();
        }
      });

      updateBadgeCount();

      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', () => {
          const msgEl = document.getElementById('successMessage');
          if (msgEl) msgEl.textContent = 'Your account has been logged out successfully!';
          const modal = document.getElementById('successCard');
          if (modal) modal.classList.add('active');
          setTimeout(() => {
            if (modal) modal.classList.remove('active');
            localStorage.clear();
            window.location.href = 'login-page.html';
          }, 3000);
        });
      }
        function bc_openModal() {
            document.getElementById("bc-modal-overlay").style.display = "flex";
        }

        function bc_closeModal() {
            document.getElementById("bc-modal-overlay").style.display = "none";
        }

    function openSocialWork() {
      document.getElementById("budgetSocialWork").style.display = "flex";
    }

    function closeSocialWork() {
      document.getElementById("budgetSocialWork").style.display = "none";
    }

    function openSocialClub() {
      document.getElementById("budgetSocialClub").style.display = "flex";
    }

    function closeSocialClub() {
      document.getElementById("budgetSocialClub").style.display = "none";
    }

    function openArtSociety() {
      document.getElementById("budgetArtSociety").style.display = "flex";
    }

    function closeArtSociety() {
      document.getElementById("budgetArtSociety").style.display = "none";
    }

    const SR_MAX_MESSAGE = 1000;

    function sr_open() {
      document.getElementById("sr-modal-overlay").style.display = "flex";
    }

    function sr_close() {
      document.getElementById("sr-modal-overlay").style.display = "none";
    }

    function sr_send() {
      let ok = true;

      const r = document.getElementById("sr-recipient");
      const s = document.getElementById("sr-subject");
      const m = document.getElementById("sr-message");

      const re = document.getElementById("sr-recipient-error");
      const se = document.getElementById("sr-subject-error");
      const me = document.getElementById("sr-message-error");

      re.style.display = se.style.display = me.style.display = "none";

      if (r.value.trim() === "") {
        re.textContent = "This field is required";
        re.style.display = "block";
        ok = false;
      }

      if (s.value.trim() === "") {
        se.textContent = "This field is required";
        se.style.display = "block";
        ok = false;
      }

      if (m.value.trim() === "") {
        me.textContent = "This field is required";
        me.style.display = "block";
        ok = false;
      }

      if (m.value.length > SR_MAX_MESSAGE) {
        me.textContent = `Maximum of ${SR_MAX_MESSAGE} characters only`;
        me.style.display = "block";
        ok = false;
      }

      if (!ok) return;

      const successMsgEl = document.getElementById('successMessage');
      const successModal = document.getElementById('successCard');
      if (successMsgEl) successMsgEl.textContent = 'Your reminder has been sent successfully!';
      if (successModal) successModal.classList.add('active');

      setTimeout(() => {
        if (successModal) successModal.classList.remove('active');
        sr_close();
      }, 3000);
    }

    document.getElementById("sr-message").addEventListener("input", () => {
      const msg = document.getElementById("sr-message");
      const limit = document.getElementById("sr-message-limit");

      limit.textContent = `${msg.value.length} / ${SR_MAX_MESSAGE}`;
    });

    function es_openModal() {
      document.getElementById("esModalOverlay").style.display = "flex";
    }

    function es_closeModal() {
      document.getElementById("esModalOverlay").style.display = "none";
    }

    document.addEventListener("input", function() {
      const notes = document.getElementById("esNotes").value.length;
      document.getElementById("esNotesCount").textContent = notes;
    });

    function es_saveChanges() {
      let valid = true;

      const type = document.querySelector("input[name='esEventType']:checked");
      const status = document.getElementById("esCurrentStatus").value;
      const notes = document.getElementById("esNotes").value.trim();

      document.getElementById("esErrType").textContent =
        type ? "" : "This field is required";

      document.getElementById("esErrStatus").textContent =
        status ? "" : "This field is required";

      document.getElementById("esErrNotes").textContent =
        notes ? "" : "This field is required";

      if (!type || !status || !notes) valid = false;
      if (!valid) return;

      console.log("EVENT STATUS SAVED:", {
        eventType: type.value,
        currentStatus: status,
        pendingReview: document.getElementById("esPendingReview").checked,
        requiresFollowUp: document.getElementById("esRequiresFollowUp").checked,
        notes,
      });

      const successMsgEl = document.getElementById('successMessage');
      const successModal = document.getElementById('successCard');
      if (successMsgEl) successMsgEl.textContent = 'Event status has been updated successfully!';
      if (successModal) successModal.classList.add('active');

      setTimeout(() => {
        if (successModal) successModal.classList.remove('active');
        es_closeModal();
      }, 3000);
    }
    </script>
    <div class="success-modal" id="successCard">
      <div class="card">
        <div class="success-icon">&#10003;</div>
        <p class="success-text" id="successMessage">Your account has been logged out successfully!</p>
      </div>
    </div>
  </body>
</html>